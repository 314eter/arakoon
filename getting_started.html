<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Arakoon :: Getting Started</title>
    <meta name="description"
      content="Arakoon is a distributed, consistent key-value store">
    <meta name="author" content="Incubaid BVBA">

    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="bootstrap/bootstrap.css" rel="stylesheet" />
    <link href="style.css" rel="stylesheet" />

    <!-- TODO
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->
  </head>

  <body>

    <div class="topbar">
      <div class='container'>
        <img alt='Arakoon' title='Arakoon Logo' src='img/logo.png' id='logo' />
      </div>

      <div class="fill">
        <div class="container">
          <ul class="nav">
            <li>
              <a href="index.html">Home</a>
            </li>
            <li>
              <a href="about.html">About</a>
            </li>
            <li>
              <a href="download.html">Download</a>
            </li>
            <li>
              <a href="documentation.html">Documentation</a>
            </li>
            <li>
              <a href="contact.html">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container">
      

<div>
<h2>Introduction</h2>
This page will guide you through the setup of
a 3 node Arakoon cluster. For simplicity, all of the nodes run on 1 machine
<h2>Getting it</h2>
The simplest is to download the archive. Other options (from source, debian package, ...) exist too, but this is the easiest.
<pre class="prettyprint">
  $> wget www.arakoon.org/downloads/arakoon-1.0.0.tgz

  $> tar -zxvf arakoon-1.0.0.tgz
  arakoon-1.0.0/arakoon
  arakoon-1.0.0/cfg/arakoon.ini

  $> cd arakoon-1.0.0
  arakoon-1.0.0$>
</pre>


<h2>Configuring</h2>
  An Arakoon cluster needs a config file for every node. 
  This config file needs to be exactly the same for every node, and for a cluster on a single machine, all nodes can use the same file location. 
  Here is the one we'll be using today
  
<pre class="prettyprint">
  arakoon-1.0.0$> cat cfg/arakoon.ini

  [global]
  cluster_id = ricky
  cluster = arakoon_0,arakoon_1,arakoon_2
  
  [arakoon_0]
  ip = 127.0.0.1
  client_port = 4000
  messaging_port = 4010
  home = /tmp/arakoon/arakoon_0
  
  [arakoon_1]
  ip = 127.0.0.1
  client_port = 4001
  messaging_port = 4011
  
  [arakoon_2]
  ip = 127.0.0.1
  client_port = 4002
  messaging_port = 4012
</pre>

<h2>Starting the nodes</h2>
  An arakoon node will not start unless the configured directories exist. 
  Other things you need to provide are the name of the node, and the location of it's configuration file
<pre class="prettyprint">
  arakoon-1.0.0$> mkdir -p /tmp/arakoon/arakoon_0
  arakoon-1.0.0$> ./arakoon -config cfg/arakoon.ini --node arakoon_0
</pre>
  <p>
  In another terminal, start the second node. 
  Fortunately, arakoon consider's its default configuration location to be <b>./cfg/arakoon.ini</b>
  </p>
<pre class="prettyprint">
  arakoon-1.0.0$> mkdir -p /tmp/arakoon/arakoon_1
  arakoon-1.0.0$> ./arakoon --node arakoon_1
</pre>
  <p>In yet another terminal, start the third node</p>
<pre class="prettyprint">
  arakoon-1.0.0$> mkdir -p /tmp/arakoon/arakoon_2
  arakoon-1.0.0$> ./arakoon --node arakoon_2
</pre>
<h2>First steps</h2>
The arakoon binary is also an ad-hoc client, administrative too, ... We'll show some examples below
<h3>Who's the master</h3>
<pre class="code">
  arakoon-1.0.0$> ./arakoon --who-master
  arakoon_1
</pre>
<h3>Basic Set/Get/Delete</h3>
<pre class="code">
  arakoon-1.0.0$> ./arakoon --set some_key some_value
  arakoon-1.0.0$> ./arakoon --get some_key
  "some_value"
  arakoon-1.0.0$> ./arakoon --delete some_key
  arakoon-1.0.0$> ./arakoon --get some_key
  Fatal error: exception Arakoon_exc.Exception(5, "some_key")
  Raised at file "src/core/lwt.ml", line 557, characters 22-23
  Called from file "src/unix/lwt_main.ml", line 38, characters 8-18
  Called from file "src/client/client_main.ml", line 68, characters 12-31
  Called from file "src/main/main.ml", line 395, characters 26-37
  Called from file "src/main/arakoon.ml", line 1, characters 0-12
</pre>
<h3>Simulate a disaster scenario</h3>
...


      <footer>
        <p>&copy; 2011, Incubaid BVBA</p>
      </footer>
    </div>
  </body>
</html>