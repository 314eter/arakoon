\section{State machine}

\begin{figure}[ht]\label{fig:paxos}
  \includegraphics[width=\textwidth]{doc/states.eps}
  \caption{multi paxos state machine}
\end{figure}
Figure \ref{fig:paxos} shows the state machine diagram for the arakoon nodes. 
\begin{table}
\begin{tabular}{ll}
1  & /multicast Prepare n' \\
2  & to\_receive $>$ 0/ \\
3  & Promise(n,$new_i$,limit)/ \\
4  & to\_receive $=$ 0/ multicast Accept(n,$new_i$,v)\\
5  & needed $>$ 0/\\
6  & Accept(n,i)/\\
7  & needed $=$ 0/\\
8  & /start lease\\
9  & FromClient / \\
10 & multicast Accept(n,i,v) \\
11 & Prepare(n'>n)\\
12 & Accept(n,i,v)\\
13 & Accept(n,i,v)\\
14 & Accept(n',i',v')\\
15 & /multicast Prepare(-1)\\
16 & Prepare(n)/\\
\end{tabular}
\end{table}
