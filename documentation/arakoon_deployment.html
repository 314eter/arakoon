
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Arakoon :: Arakoon Deployment</title>
    <meta name="description"
      content="Arakoon is a distributed, consistent key-value store">
    <meta name="author" content="Incubaid BVBA">

    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="../bootstrap/bootstrap.css" rel="stylesheet" />
    <link href="../style.css" rel="stylesheet" />

    <!-- TODO
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->


  </head>

  <body class='page-documentation_arakoon_deployment'>

    <header>
    <div class="topbar">
      <div class='container'>
        <a href='index.html'>
            <img alt='Arakoon' title='Arakoon Logo' src='../img/logo.png' id='logo' />
        </a>
      </div>

      <div class="fill">
        <div class="container">
        <nav>
          <ul class="nav">
            <li>
            <a href="../index.html">Home</a>
            </li>
            <li>
            <a href="../download.html">Download</a>
            </li>
            <li>
            <a href="../documentation/index.html">Documentation</a>
            </li>
            <li>
            <a href="../contact.html">Contact</a>
            </li>
          </ul>
        </nav>
        </div>
      </div>
    </div>
    </header>

    <div class="container" id='main'>
      

<div class="document" id="arakoon-deployment">
<h1 class="title">Arakoon Deployment</h1>

<p>Below you find an example of an Arakoon configuration. The example is a
three-node setup with one master node and two slave nodes. The shown clients
can be PHP, OCaml, or Python clients.</p>
<img alt="..//img/ArakoonDeployment.png" src="..//img/ArakoonDeployment.png" />
<p>An arakoon cluster consists of a small set of nodes that contain the full range
of key-value pairs. Each node carries all the data, yet one node is assigned to
be the master node.The master node manages all the updates for all the clients.
Clients only talk to the master node, but may contact other nodes to discover
who the master node is; they do so because nodes can assume different roles.</p>
<p>A node is a service that stores key-value pairs in its own local directory. In
a typical setup you install one node per physical server, resulting in a
<em>distributed deployment</em>.</p>
<div class="tip">
<p class="first admonition-title">Tip</p>
<p class="last">For testing purposes it is possible to install multiple nodes on one server.
Obviously this is not the recommended setup.</p>
</div>
<div class="section" id="directory-structure">
<h2>Directory Structure</h2>
<p>The directory structure of a node typically looks like this:</p>
<pre class="literal-block">
machine1
└── mycluster
    └── mycluster_0
        ├── 000.tlog
        ├── mycluster_0.db
        └── mycluster_0.db.wal

machine2
└── mycluster
    └── mycluster_1
        ├── 000.tlog
        ├── mycluster_1.db
        └── mycluster_1.db.wal

machine3
└── mycluster
    └── mycluster_2
        ├── 000.tlog
        ├── mycluster_2.db
        └── mycluster_2.db.wal
</pre>
<p>These are the components:</p>
<ul class="simple">
<li>mycluster: the name of the cluster, its subdirectories form the cluster nodes</li>
<li>mycluster_X: the name of a node in a cluster</li>
<li>XXX.tlog: Incubaid's transaction log files, contains the logs for all
transactions executed on the node</li>
<li>mycluster_X.db: the actual key/value store</li>
<li>mycluster_X.db.wal: security database to keep the key/value store consistent,
for example in case of a failure</li>
</ul>
<p>You define yourself where you store the directory structure in the
<a class="reference external" href="arakoon_configuration.html">Arakoon configuration file</a>.</p>
</div>
<div class="section" id="how-arakoon-works">
<h2>How Arakoon Works</h2>
<p>An Arakoon client always looks up the master of a cluster and then sends a
request to the master. The master node of a cluster has a queue of all client
requests. The moment that a request is queued, the master node sends the
request to all his slaves and writes the request in the
<em>Transaction Log (TLog)</em>. When the slaves receive a request, they store this
also in their proper TLog and send an acknowledgement to the master.</p>
<p>A master awaits for the acknowledgements of the slaves. When he receives an
acknowledgement of half the nodes plus one, the master pushes the key/value
pair in its database. In a five node setup (one master and four slaves), the
master must receive an acknowledgement of two slaves before he writes his data
to the database, since he is also taken into account as node.</p>
<p>After having written his data in his database, the master starts the following
request in his queue. When a slave receives this new request, the slaves first
write the previous request in their proper database before handling the new
request. This way a slave is always certain that the master has successfully
written the data in his proper database.</p>
</div>
<div class="section" id="example-three-node-setup">
<h2>Example Three Node Setup</h2>
<p>Below you can find an example of a three node setup, consisting of three
machines, each running one Arakoon node.</p>
<img alt="..//img/ArakoonSetup.png" src="..//img/ArakoonSetup.png" />
</div>
</div>


      <footer>
      <div class='row'>
        <div class='span-one-third'>
          <p>&copy; 2011, Incubaid BVBA</p>
        </div>
        <div class='span-two-thirds'>
          <p class='pull-right'>
            <a href='../disclaimer.html'>Disclaimer</a>
            |
            <a href='../privacy_policy.html'>Privacy Policy</a>
          </p>
        </div>
      </div>
      </footer>
    </div>
  </body>
</html>